<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Generador de Citas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Generador de Citas Inspiradoras</h1>
        
        <div id="quote-box" class="quote-box">
            <p class="quote-text">Presiona el bot√≥n para generar una cita.</p>
            <p class="quote-author">‚Äî Autor Desconocido</p>
        </div>

        <button id="generate-btn">Generar Cita</button>

        <hr>

        <div class="external-links">
            <h3>Medios Digitales y Servicios en la Nube</h3>
            <p>
                <a href="https://www.youtube.com/results?search_query=citas+filosoficas" target="_blank" class="service-link">
                    üé• Ver videos relacionados en YouTube
                </a>
            </p>
            <p>
                <a href="https://drive.google.com/drive/u/0/my-drive" target="_blank" class="service-link">
                    ‚òÅÔ∏è Ir a Google Drive
                </a>
            </p>
            <p>
                <a href="https://github.com/tu-usuario/nombre-del-repo" target="_blank" class="service-link">
                    </> Ver C√≥digo Fuente en GitHub
                </a>
            </p>

            <!-- üéØ NUEVA SECCI√ìN DE ADMINISTRACI√ìN (CRUD) -->
            <hr>
            <h3>Administraci√≥n y base de datos</h3>
            <a href="/admin" class="service-link" style="font-weight: 700; color: #dc3545;">
                ‚öôÔ∏è ADMINISTRAR CITAS
            </a>
        </div>
    </div>

<script>
    const quoteTextElement = document.querySelector('.quote-text');
    const quoteAuthorElement = document.querySelector('.quote-author');
    const generateBtn = document.getElementById('generate-btn');

    async function fetchNewQuote() {
        try {
            const response = await fetch('/api/quote'); 

            if (!response.ok) {
                throw new Error(`Error HTTP: ${response.status}`);
            }

            const data = await response.json();
            
            if (data.text) {
                quoteTextElement.textContent = data.text;
                quoteAuthorElement.textContent = '‚Äî ' + data.author;
            } else {
                quoteTextElement.textContent = 'No hay citas disponibles en la DB.';
                quoteAuthorElement.textContent = '‚Äî Sistema';
            }
        } catch(error) {
            console.error('Error al obtener la cita:', error);
            quoteTextElement.textContent = 'Error: Fallo al comunicarse con el servidor.';
            quoteAuthorElement.textContent = '‚Äî Verifica los Logs de Render/Railway';
        }
    }
    if (generateBtn) {
        generateBtn.addEventListener('click', fetchNewQuote);
    } else {
        console.error("Bot√≥n 'generate-btn' no encontrado.");
    }
    
    // Carga una cita al iniciar la p√°gina
    document.addEventListener('DOMContentLoaded', fetchNewQuote);
</script>
</body>
</html>